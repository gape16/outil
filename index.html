<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="css/main.css">
</head>
<body>
	<div id="game">
		<div class="players">
			<div class="player-one">2000E</div>
		</div>
		<div class="des">
			<a class="roll">D6</a>
			<div class="die">Jet</div>
		</div>
		<div class="board">
			<div class="tile start" value="0" price="200">
				<p class="card">Bienvenue</p>
				<div class="overlay">Rien</div>
			</div>
			<div class="tile" value="1" price="200">
				<p class="card">Terrain 1</p>
				<div class="overlay">
					<h1>Terrain 1</h1>
					<a href="#" class="cancel">x</a>
					<a href="#" class="buy">buy</a>
				</div>
			</div>
			<div class="tile" value="2" price="200">
				<p class="card">Terrain 2</p>
				<div class="overlay">
					<h1>Terrain 2</h1>
					<a href="#" class="cancel">x</a>
					<a href="#" class="buy">buy</a>
				</div>
			</div>
			<div class="tile" value="3" price="200">
				<p class="card">Chance</p>
				<div class="overlay">
					<h1>Terrain 3</h1>
					<a href="#" class="cancel">x</a>
					<a href="#" class="buy">buy</a>
				</div>
			</div> 
			<div class="tile" value="4" price="200">
				<p class="card">Terrain 3</p>
				<div class="overlay">
					<h1>Terrain 4</h1>
					<a href="#" class="cancel">x</a>
					<a href="#" class="buy">buy</a>
				</div>
			</div>
			<div class="tile" value="5" price="200">
				<p class="card">Gare</p>
				<div class="overlay">
					<h1>Terrain 5</h1>
					<a href="#" class="cancel">x</a>
					<a href="#" class="buy">buy</a>
				</div>
			</div>
			<div class="tile" value="6" price="200">
				<p class="card">chance</p>
				<div class="overlay">
					<h1>Terrain 6</h1>
					<a href="#" class="cancel">x</a>
					<a href="#" class="buy">buy</a>
				</div>
			</div>
			<div class="tile" value="7">
				<p class="card">h</p>
			</div>
			<div class="tile" value="8">
				<p class="card">i</p>
			</div>
			<div class="tile" value="9">
				<p class="card">j</p>
			</div>
			<div class="tile" value="10">
				<p class="card">k</p>
			</div>
			<div class="tile" value="11">
				<p class="card">l</p>
			</div>
			<div class="tile" value="12">
				<p class="card">m</p>
			</div>
			<div class="tile" value="13">
				<p class="card">n</p>
			</div>
			<div class="tile" value="14">
				<p class="card">o</p>
			</div>
			<div class="tile" value="15">
				<p class="card">p</p>
			</div>
			<div class="tile" value="16">
				<p class="card">q</p>
			</div>
			<div class="tile" value="17">
				<p class="card">r</p>
			</div>
			<div class="tile" value="18">
				<p class="card">s</p>
			</div>
			<div class="tile" value="19">
				<p class="card">t</p>
			</div>
			<div class="tile" value="20">
				<p class="card">u</p>
			</div>
			<div class="tile" value="21">
				<p class="card">v</p>
			</div>
			<div class="tile" value="22">
				<p class="card">w</p>
			</div>
			<div class="tile" value="23">
				<p class="card">x</p>
			</div>
			<div class="tile" value="24">
				<p class="card">y</p>
			</div>
			<div class="tile" value="25">
				<p class="card">z</p>
			</div>
			<div class="tile" value="26">
				<p class="card">1</p>
			</div>
			<div class="tile" value="27">
				<p class="card">2</p>
			</div>
			<div class="tile" value="28">
				<p class="card">3</p>
			</div>
			<div class="tile" value="29">
				<p class="card">4</p>
			</div>
			<div class="tile" value="30">
				<p class="card">5</p>
			</div>
			<div class="tile" value="31">
				<p class="card">6</p>
			</div>
			<div class="tile" value="32">
				<p class="card">7</p>
			</div>
			<div class="tile" value="33">
				<p class="card">8</p>
			</div>
			<div class="tile" value="34">
				<p class="card">9</p>
			</div>
			<div class="tile" value="35">
				<p class="card">10</p>
			</div>
			<div class="tile" value="36">
				<p class="card">11</p>
			</div>
			<div class="tile" value="37">
				<p class="card">12</p>
			</div>
			<div class="tile" value="38">
				<p class="card">13</p>
			</div>
			<div class="tile" value="39">
				<p class="card">13</p>
			</div>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.0/jquery.cookie.js"></script> 
	<script> 
		function setCookie(key, value) {
			var expires = new Date();
			expires.setTime(expires.getTime() + (365 * 24 * 60 * 60 * 1000));
			document.cookie = key + '=' + value + ';expires=' + expires.toUTCString();
		}

		function getCookie(key) {
			var keyValue = document.cookie.match('(^|;) ?' + key + '=([^;]*)(;|$)');
			return keyValue ? keyValue[2] : null; 
		}






		$(document).ready(function(){
			var widthTile = $('.tile').width();
			var player = $('<div class="player"></div>');
			$(player).insertBefore('.start .overlay');
			$('.tile').css('height', widthTile);
			var moneyp1 = $('.player-one').html();

		      //ROLL
		      var dieNum;
		      function getRandomInt(min, max) {
		      	return Math.floor(Math.random() * (max - min + 1) + min);
		      }
		      function rollDie(num) {
		      	num = num.substring(1, num.length);
		      	$(".die").html(getRandomInt(1, num));
		      }


		      $(".roll").on("click", function(e) {
		      	e.preventDefault();
		        //recup du jet de dé
		        dieNum = $(this).html();
		        rollDie(dieNum);
		        //desac du dé
		        $('.roll').addClass('not-active'); 
		        //var du nombre de case à avancer
		        var nbCase = $('.die').html();
				//recup valeur de la position du player;
				var playerPosition = $('.player').parent('.tile').attr('value');
				console.log(playerPosition);
			    //addition pour bouger
			    var mouv = parseInt(nbCase) + parseInt(playerPosition);
			    console.log(mouv);
			    //append du joueur avant loverlay
			    $(player).insertBefore('.tile[value='+mouv+'] .overlay');
			    var playerPosition = $('.player').parent('.tile').attr('value');
			    console.log(playerPosition);
		        //affichage de l'overlay de la case
		        $('.tile[value='+mouv+'] .overlay').css('display','block');
		        setCookie('joueur', 'test');
		    });

		        //clic sur buy
		        $('.buy').click(function(){
		        	var mouv = init();
		          //récup du prix de la carte
		          var prix = $('.tile[value='+mouv+']').attr('price');
		          //calcul pour achat
		          var transaction = parseInt(moneyp1) - parseInt(prix);
		          //balance argent
		          $('.player-one').html(transaction);
		          //masquage de l'overlay
		          $('.tile[value='+mouv+'] .overlay').css('display', 'none');
		      });


		    	//clic sur off
		    	$('.cancel').click(function(){  		
		    		$('.tile[value='+mouv+'] .overlay').css('display', 'none');
		    		$('.roll').removeClass('not-active');
		    		alert('joueur suivant!');
		    		getCookie('joueur');
		    	});

		    });
		</script>
	</body>
	</html>